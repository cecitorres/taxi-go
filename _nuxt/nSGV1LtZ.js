import K from"./BVlAzON8.js";import Y from"./C36WSGhM.js";import{s as $,g as H,i as J,u as Q,a as X,_ as Z,b as ee,c as te,d as oe,e as ne}from"./DC1YzQ5V.js";import{r as l,L as I,o as se,v as ae,x as t,z as a,M as e,N as V,O as ie,l as re,t as le}from"./BAaZmZTt.js";import"./D353lJdH.js";import"./D_t1jvqx.js";import"./mnapGabW.js";import"./BzJHxS8f.js";import"./C-xrySMc.js";import"./BERa-QWy.js";import"./CHKeDYKc.js";import"./IedRcED-.js";import"./DElApvlb.js";import"./Da0R-Pzg.js";import"./8HIMKdQ7.js";import"./0psCbJ9L.js";function T(f){const i=l(""),o=l([]),c=l([]),p=l([]);return{input:i,suggestionsResult:o,suggestionsText:c,coordinates:p,onSearch:async m=>{try{const n=await $(m.query,I(f));o.value=n.Results,c.value=o.value.map(d=>d.Text)}catch(n){console.error("Error searching for places:",n)}},onSelect:async m=>{try{const n=o.value.find(v=>v.Text===m.value).PlaceId,d=await H(n,I(f));p.value=d.Place.Geometry.Point}catch(n){console.error("Error getting place coordinates:",n)}},resetValues:()=>{i.value="",o.value=[],c.value=[],p.value=[]}}}const ce={class:"px-8 pt-6 pb-8 mb-4 bg-white rounded shadow-md"},ue=t("p",{class:"text-2xl"},"Calcule su tarifa de taxi",-1),de={class:"mb-4"},pe=t("label",{class:"block mb-2 font-bold text-gray-700 text-md",for:"username"}," Punto de partida ",-1),me={class:"flex"},ge={class:"mb-4"},_e=t("label",{class:"block mb-2 font-bold text-gray-700 text-md",for:"destinationInput"},"Punto de llegada ",-1),fe={class:"flex"},ve={class:"flex items-center justify-around"},xe={class:"my-4"},Oe={__name:"index",setup(f){const i=l(),o=re();o.public.AWS_LOCATION_SERVICE_KEY,o.public.MAP_NAME,o.public.AWS_REGION,se(async()=>{i.value=await J()});const{loading:c,getUserLocation:p}=Q(),h=async()=>{const s=await p();u.value="Mi ubicacion",d.value=s},S=()=>{k(),A()},{input:u,suggestionsResult:m,suggestionsText:n,coordinates:d,onSearch:v,onSelect:w,resetValues:k}=T(i),{input:r,suggestionsResult:he,suggestionsText:P,coordinates:b,onSearch:E,onSelect:L,resetValues:A}=T(i),F=async()=>{try{const s=await ne(r.value,i.value);b.value=s.Geometry.Point,r.value=s.Label}catch(s){console.error("Error searching for place:",s)}},C=l(),y=l(null),{loading:M,distance:O,duration:N,fareCost:B,routeString:G,calculateTaxiFare:U}=X(i),D=async()=>{await U(d.value,b.value),y.value.drawRoute(G.value),C.value.scrollIntoView({behavior:"smooth"})},z=async()=>{const s=await te();r.value=s,F()};return(s,g)=>{const R=K,_=Y,W=oe,j=Z,q=ee;return le(),ae(ie,null,[t("div",ce,[ue,t("div",de,[pe,t("div",me,[a(R,{"input-id":"originInput",modelValue:e(u),"onUpdate:modelValue":g[0]||(g[0]=x=>V(u)?u.value=x:null),suggestions:e(n),onComplete:e(v),onItemSelect:e(w),placeholder:"Centro de Monterrey ...",forceSelection:"",disabled:e(c),class:"flex-1 mr-2"},null,8,["modelValue","suggestions","onComplete","onItemSelect","disabled"]),a(_,{onClick:h,loading:e(c),icon:"pi pi-map-marker",severity:"danger"},null,8,["loading"])])]),t("div",ge,[_e,t("div",fe,[a(R,{"input-id":"destinationInput",modelValue:e(r),"onUpdate:modelValue":g[1]||(g[1]=x=>V(r)?r.value=x:null),suggestions:e(P),onComplete:e(E),onItemSelect:e(L),placeholder:"Centro de Guadalupe ...",forceSelection:"",class:"flex-1 mr-2"},null,8,["modelValue","suggestions","onComplete","onItemSelect"]),a(_,{onClick:z,icon:"pi pi-microphone",severity:"warning"})])]),t("div",ve,[a(_,{label:"Limpiar",onClick:S,outlined:""}),a(_,{label:"Calcular",onClick:D,loading:e(M)},null,8,["loading"])])]),t("div",{class:"mt-4",ref_key:"infoRideRef",ref:C},[t("div",xe,[a(W,{ref_key:"mapRef",ref:y},null,512)]),a(j,{"fare-cost":e(B)},null,8,["fare-cost"]),a(q,{"origin-address":e(u),"destination-address":e(r),distance:e(O),duration:e(N)},null,8,["origin-address","destination-address","distance","duration"])],512)],64)}}};export{Oe as default};
